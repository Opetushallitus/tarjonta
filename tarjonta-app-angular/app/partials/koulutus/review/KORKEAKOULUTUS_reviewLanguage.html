<!--
  Kieliriippuva data review tabeissa.
-->

<table class="tarjontaForm">
    <tr><th></th><td></td><td></td></tr>

    <!-- PERUSTIEDOT / TODO collapse -->

    <tr class="collapse" ng-class="model.collapse.perusTiedot ? '' : 'open'">
        <th colspan="2" tt="koulutus.review.perustiedot.otsikko" ng-click="model.collapse.perusTiedot = !model.collapse.perusTiedot"></th>
        <td><a class="btn" ng-disabled="!isMutable" href data-ng-click="doEdit($event, 'PERUSTIEDOT')"><span tt="koulutus.review.muokkaa">Muokkaa</span> <span class="icon-edit"></span></a></td>
    </tr>

    <tbody ng-show="!model.collapse.perusTiedot">

    <!-- organisaation nimi -->
    <tr>
        <th tt="koulutus.review.perustiedot.organisaatio">Organisaatio</th>
        <td colspan="2">
            {{model.koulutus.organisaatio.nimi}}
        </td>
    </tr>

    <!-- koulutus -->
    <tr>
        <th tt="koulutus.review.perustiedot.koulutus">Koulutuksen perustiedot</th>
        <td colspan="2">
            {{model.koulutus.koulutuskoodi.meta[lang.koodi_uri].nimi}}
            <i>{{model.koulutus.koulutuskoodi.arvo}}</i>
        </td>
    </tr>

    <!-- tutkinto-ohjelman tunniste -->
    <tr>
        <th tt="koulutus.review.perustiedot.tutkintoOhjelmaJaTunniste">Tutkinto-ohjelman tunniste</th>
        <td colspan="2">
            {{model.koulutus.koulutusohjelma.tekstis[lang.koodi_uri]}}
            <i>({{model.koulutus.tunniste}})</i>
        </td>
    </tr>

    <!-- koulutusaste -->
    <tr>
        <th tt="koulutus.review.perustiedot.koulutusaste">Koulutusaste</th>
        <td colspan="2">
            {{model.koulutus.koulutusaste.meta[lang.koodi_uri].nimi || model.koulutus.koulutusaste.nimi }}
        </td>
    </tr>

    <!-- koulutusala -->
    <tr>
        <th tt="koulutus.review.perustiedot.koulutusala">Koulutusala</th>
        <td colspan="2">
            {{model.koulutus.koulutusala.meta[lang.koodi_uri].nimi}}
        </td>
    </tr>

    <!-- opintoala -->
    <tr>
        <th tt="koulutus.review.perustiedot.opintoala">Opintoala</th>
        <td colspan="2">
            {{model.koulutus.opintoala.meta[lang.koodi_uri].nimi}}
        </td>
    </tr>

    <!-- teemat ja aiheet -->
    <tr>
        <th tt="koulutus.review.perustiedot.teematJaAiheet">Teemat ja aiheet</th>
        <td colspan="2">
            <span data-ng-repeat='aihe in model.koulutus.aihees.meta'>{{ aihe.meta[lang.koodi_uri].nimi }}{{ $last ? '' : ', ' }}</span>
        </td>
    </tr>

    <!-- tutkinto -->
    <tr>
        <th tt="koulutus.review.perustiedot.tutkinto">Tutkinto</th>
        <td colspan="2">
            {{model.koulutus.tutkinto.meta[lang.koodi_uri].nimi}}
        </td>
    </tr>

    <!-- tutkintonimike -->
    <tr>
        <th tt="koulutus.review.perustiedot.tutkintonimike">Tutkintonimike</th>
        <td colspan="2">
            <span  ng-repeat="metas in model.koulutus.tutkintonimikes.meta">
               {{metas.meta[lang.koodi_uri].nimi}}
            </span>
        </td>
    </tr>

    <!-- vaativuustaso -->
    <tr>
        <th tt="koulutus.review.perustiedot.vaativuustaso">Vaativuustaso</th>
        <td colspan="2">
            {{model.koulutus.eqf.meta[lang.koodi_uri].nimi}}
        </td>
    </tr>

    <!-- opintojen laajuus -->
    <tr>
        <th tt="koulutus.review.perustiedot.opintojenLaajuus">Laajuus</th>
        <td colspan="2">
            {{ model.koulutus.opintojenLaajuusarvo.meta[lang.koodi_uri].nimi}} {{model.koulutus.opintojenLaajuusyksikko.meta[lang.koodi_uri].nimi}}
        </td>
    </tr>
    
     <!-- kandidaatin koulutuskoodi (optional) -->
    <tr>
        <th tt="koulutus.review.koulutuskoodi-kandidaatti">Koulutukseen sisältyy kandidaatin koulutus</th>
        <td colspan="2">
            {{model.koulutus.kandidaatinKoulutuskoodi.meta[lang.koodi_uri].nimi}}
            <i>{{model.koulutus.kandidaatinKoulutuskoodi.arvo}}</i>
        </td>
    </tr>

    <!-- koulutuslaji
    <tr>
        <th tt="koulutus.review.perustiedot.koulutuslaji">Koulutuslaji</th>
        <td colspan="2">
            [KOULUTUSLAJI]
        </td>
    </tr>-->

    <!-- pohjakoulutusvaatimus -->
    <!--
    <tr>
        <th tt="koulutus.review.perustiedot.pohjakoulutusvaatimus">Pohjakoulutusvaatimukset</th>
        <td colspan="2">
            <span data-ng-repeat='meta in model.koulutus.pohjakoulutusvaatimukset.meta'>{{ meta.nimi}}{{ $last ? '' : ', ' }}</span>
        </td>
    </tr>
     -->

    <!-- alkamispvm -->
    <tr>
        <th tt="koulutus.review.perustiedot.alkamispvm">Alkamispäivämäärä</th>
        <td colspan="2">
            <span ng-switch="model.koulutus.koulutuksenAlkamisPvms.length">
                <span ng-switch-when="0">
                {{model.koulutus.koulutuksenAlkamiskausi.meta[lang.koodi_uri].nimi}} {{model.koulutus.koulutuksenAlkamisvuosi}}
                </span>
                <span ng-switch-default>
                    <p data-ng-repeat='pvm in  model.koulutus.koulutuksenAlkamisPvms'> {{ pvm | date:'dd.MM.yyyy' }}</p>
                </span>
            </span>
        </td>
    </tr>

    <!-- suunniteltu kesto -->
    <tr>
        <th tt="koulutus.review.perustiedot.suunniteltuKesto">Suunniteltu kesto</th>
        <td colspan="2">
            {{ model.koulutus.suunniteltuKestoArvo}} {{ model.koulutus.suunniteltuKestoTyyppi.meta[lang.koodi_uri].nimi}}
        </td>
    </tr>

    <!-- opetuskielet -->
    <tr>
        <th tt="koulutus.review.perustiedot.opetuskielet">Opetuskielet</th>
        <td colspan="2">
            <span data-ng-repeat='kieli in model.koulutus.opetuskielis.meta'>{{ kieli.nimi}}{{ $last ? '' : ', ' }}</span>
        </td>
    </tr>

    <!-- opetusajat -->
    <tr>
        <th tt="koulutus.review.perustiedot.opetusajat">Opetusajat</th>
        <td colspan="2">
            <span data-ng-repeat='o in model.koulutus.opetusAikas.meta'>{{ o.nimi}}{{ $last ? '' : ', ' }}</span>
        </td>
    </tr>

    <!-- opetusmuodot -->
    <tr>
        <th tt="koulutus.review.perustiedot.opetusmuodot">Opetusmuodot</th>
        <td colspan="2">
            <span data-ng-repeat='o in model.koulutus.opetusmuodos.meta'>{{ o.nimi}}{{ $last ? '' : ', ' }}</span>
        </td>
    </tr>

    <!-- opetuspaikat -->
    <tr>
        <th tt="koulutus.review.perustiedot.opetuspaikat">Opetuspaikat</th>
        <td colspan="2">
            <span data-ng-repeat='o in model.koulutus.opetusPaikkas.meta'>{{ o.nimi}}{{ $last ? '' : ', ' }}</span>
        </td>
    </tr>

    <!-- maksullisuus -->
    <tr>
        <th tt="koulutus.review.perustiedot.maksullisuus">Maksullisuus</th>
        <td colspan="2">
            {{model.koulutus.opintojenMaksullisuus ? t("yes") : t("no")}}
        </td>
    </tr>

    </tbody>

    <!-- KUVAILEVAT TIEDOT -->

    <tr class="collapse" ng-class="model.collapse.kuvailevatTiedot ? '' : 'open'">
        <th colspan="2" tt="koulutus.review.kuvailevatTiedot.otsikko" ng-click="model.collapse.kuvailevatTiedot = !model.collapse.kuvailevatTiedot">Kuvailevat tiedot</th>
        <td><a class="btn" ng-disabled="!isMutable" href data-ng-click="doEdit($event, 'KUVAILEVATTIEDOT')"><span tt="koulutus.review.muokkaa"/> <span class="icon-edit"></span></a></td>
    </tr>

    <tbody ng-show="!model.collapse.kuvailevatTiedot">

    <!-- kuva -->
    <tr>
        <th tt="koulutus.review.lisatiedot.kuva">Kuva</th>
        <td colspan="2">
            <img ng-show="getRakenneKuvaSrc(lang.koodi_uri)" ng-src="{{getRakenneKuvaSrc(lang.koodi_uri)}}" style="width:300px; max-width:300px; height:auto"/>
        </td>
    </tr>

    <tr ng-repeat="lisatieto in lisatiedot">
        <th>{{t('koulutus.review.kuvailevatTiedot.' + lisatieto.type)}}</th>
        <td colspan="2" data-ng-bind-html="getKuvausApiModelLanguageUri(lisatieto.isKomo)[lisatieto.type].tekstis[lang.koodi_uri]"></td>
    </tr>

    </tbody>

    <!-- SISÄLTYVÄT OPINTOKOKONAISUUDET -->

    <tr class="collapse" ng-class="model.collapse.sisaltyvatOpintokokonaisuudet ? '' : 'open'">
        <th colspan="2" tt="koulutus.review.sisaltyvatOpintokokonaisuudet.otsikko" ng-click="model.collapse.sisaltyvatOpintokokonaisuudet = !model.collapse.sisaltyvatOpintokokonaisuudet">Sisältyvät opintokokonaisuudet</th>
        <td>
            <a class="btn" ng-disabled="!isMutable" href data-ng-click="doEdit($event, 'SISALTYVATOPINTOKOKONAISUUDET_LIITA')"><span tt="koulutus.review.sisaltyvyys-liita">Liitä</span> <span class="icon-plus-sign"></span></a>
            <a class="btn" ng-disabled="!isMutable" href data-ng-click="doEdit($event, 'SISALTYVATOPINTOKOKONAISUUDET_POISTA')"><span tt="koulutus.review.sisaltyvyys-poista">Poista</span> <span class="icon-minus-sign"></span></a>
        </td>
    </tr>

    <tbody ng-show="!model.collapse.sisaltyvatOpintokokonaisuudet">

    <tr>
        <th></th>
        <td colspan="2">
            <tree-field
            names="[]"
            oids="model.selectedKomoOid"
            review-oids="null"
            fn-click-handler="null"
            fn-loaded-handler="null"
            lang="fi"></tree-field> <!-- TODO get real user's lang code -->
        </td>
    </tr>

    </tbody>


    <!-- HAKUKOHTEET -->

    <tr class="collapse" ng-class="model.collapse.hakukohteet ? '' : 'open'">
        <th colspan="2" tt="koulutus.review.hakukohteet.otsikko" ng-click="model.collapse.hakukohteet = !model.collapse.hakukohteet">Hakukohteet</th>
        <td><a class="btn" ng-disabled="!isMutable" href data-ng-click="addHakukohde()"><span tt="koulutus.review.luo.hakukohde">Luo uusi hakukohde</span> <span class="icon-edit"></span></a></td>
    </tr>

    <tbody ng-show="!model.collapse.hakukohteet">

    <tr>
        <th></th>
        <td colspan="2">
            <table class="table">
                <tr data-ng-repeat="hakukohde in  model.hakukohteet">
                    <td>
                        <a ng-href="#/hakukohde/{{hakukohde.oid}}">{{findHakukohdeNimi(lang,hakukohde)}}</a>
                    </td>
                    <td>
                        <div class="align-right">
                            <!-- <a class="btn" href ><span tt="hakukohde.review.koulutus.nayta.koulutus">Näytä koulutus</span> <span class="icon-eye-open"></span></a> -->

                            <a class="btn" ng-disabled="!isMutable" href ng-click="removeKoulutusFromHakukohde(hakukohde)"><span tt="hakukohde.review.koulutus.poista">Poista hakukohteelta</span> <span class="icon-remove"></span></a>
                        </div>
                    </td>
                </tr>
            </table>
       </td>
    </tr>

    </tbody>

</table>
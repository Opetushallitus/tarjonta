
<div  data-ng-controller="SearchController"><div class="wsidebar-left well">

    <div id="orgSearch">
        <input name="tekstihaku" ng-model="hakuehdot.searchStr" type="text" ng-enter="submitOrg()"
               value="" name="searchString" class="text search"
               placeholder="{{ t('organisaatiohaku.tekstihaku.placeholder') }}">

        <select ng-model="hakuehdot.organisaatiotyyppi"
                ng-options="organisaatiotyyppi.koodi as organisaatiotyyppi.nimi for organisaatiotyyppi in organisaatiotyypit">
            <option value="">{{t("organisaatiohaku.organisaatiotyypit.prompt")}}</option>
        </select>

        <select ng-model="hakuehdot.oppilaitostyyppi"
                ng-options="koodi.koodiUriWithVersion as koodi.koodiNimi for koodi in oppilaitostyypit">
            <option value="">{{t("organisaatiohaku.oppilaitostyypit.prompt")}}</option>
        </select>

        <input ng-model="hakuehdot.lakkautetut" type="checkbox" name="includePassive" id="passiiviset" value="true">
        <label for="passiiviset">{{t("organisaatiohaku.label.nayta.myos.lakkautetut") }}</label><br/><br/>

        <input ng-model="hakuehdot.suunnitellut" type="checkbox" name="includePlanned" id="suunnitellut" value="true">
        <label for="suunnitellut">{{t("organisaatiohaku.label.nayta.myos.suunnitellut")}}</label><br/><br/>

        <div class="buttons">
            <div class="btn btn-primary" ng-click="resetOrg()"><div tt="organisaatiohaku.button.tyhjenna"></div></div>
            <div class="btn btn-primary" ng-click="submitOrg()"><div tt="organisaatiohaku.button.hae"></div></div>
        </div>
    </div>

    <div id="orgSearchResults" class="treeview" data-angular-treeview="true"
         data-tree-id="organisaatio"
         data-org-tree-model="tulos"
         data-node-id="oid"
         data-node-label="nimi"
         data-node-children="children" >
    </div>

</div>

<div class="wsidebar-main">

    <div id="searchSpec">

        <div class="title">
            <span>{{selectedOrgName}}</span>
            <a href="" ng-click="clearOrg()">[{{t('tarjonta.haku.poistaOrgValinta')}}]</a>
        </div>

        <table class="spec">
            <!-- otsikkorivi -->
            <tr>
                <th>{{t('tarjonta.haku.tila')}}</th>
                <th>{{t('tarjonta.haku.alkamisVuosi')}}</th>
                <th>{{t('tarjonta.haku.alkamisKausi')}}</th>
                <th colspan="2">&nbsp;</th>
            </tr>
            <!-- kontrollit -->
            <tr>
                <td class="state">
                    <select ng-model="spec.state" ng-options="s as t for (s,t) in states"/>
                </td>
                <td class="year">
                    <select ng-model="spec.year" ng-options="s as t for (s,t) in years"/>
                </td>
                <td class="season">
                    <select ng-model="spec.season" ng-options="s as t for (s,t) in seasons"/>
                </td>
                <td class="controls">
                    <input class="btn" type="button" value="{{t('tarjonta.haku.tyhjenna')}}" ng-click="reset()"/>
                    <input class="btn btn-primary" type="button" value="{{t('tarjonta.haku.hae')}}" ng-click="search()"/>
                </td>
                <td class="controls">
                    <input class="btn" type="button" value="{{t('tarjonta.haku.tulosta_raportti')}}" ng-click="report()" disabled="true"/>
                </td>

            </tr>
        </table>

        <div class="search">
            <input type="text" ng-model="spec.terms" ng-enter="search()"/>
        </div>

    </div>

	<div id="searchResults">
	    <tabset>
	        <tab heading="{{t('tarjonta.hakutulos.koulutukset')}}{{koulutusResultCount}}">

	        	<div class="controls">
	        		<input class="btn" type="button" value="{{t('tarjonta.toiminnot.siirra_tai_kopioi')}}" ng-disabled="!koulutusActions.canMoveOrCopy"/>
	        		<input class="btn" type="button" value="{{t('tarjonta.toiminnot.luo_uusi_hakukohde')}}" data-ng-click="luoUusiHakukohde()" ng-disabled="!koulutusActions.canCreateHakukohde"/>
	        		<input class="btn float-right" type="button"  ng-click="openLuoKoulutusDialogi()" value="{{t('tarjonta.toiminnot.luo_uusi_koulutus')}}" ng-disabled="luoKoulutusDisabled()"/>
                                <input class="btn float-right" type="button"  ng-click="openLiitaKoulutusDialogi()" value="{{t('tarjonta.toiminnot.liita_koulutus')}}" />
	     
                        </div>

	        	<results-table
	        		id="nkoulutuksetResults"
	        		prefix="koulutus"
	        		content="koulutusResults"
	        		columns="koulutusColumns"
	        		options="koulutusOptions"
	        		selection="selection.koulutukset"/>

	        	<!--
	        	<div class="controls">
	        		<input type="checkbox" class="selectAll"/>
			 		<label>{{t('tarjonta.toiminnot.valitse_kaikki')}}</label>
				</div>

	        	<table id="koulutuksetResults"></table>
		         -->
	        </tab>
	        <tab heading="{{t('tarjonta.hakutulos.hakukohteet')}}{{hakukohdeResultCount}}">

	        	<results-table
	        		id="nhakukohteetResults"
	        		prefix="hakukohde"
	        		content="hakukohdeResults"
	        		columns="hakukohdeColumns"
	        		options="hakukohdeOptions"
	        		selection="selection.hakukohteet"/>

				<!--
	        	<div class="controls">
	        		<input type="checkbox" class="selectAll"/>
			 		<label>{{t('tarjonta.toiminnot.valitse_kaikki')}}</label>
				</div>

	        	<table id="hakukohteetResults"></table>
				 -->

	        </tab>

	    </tabset>
	    
    </div>
</div>
</div>
<div data-ng-controller="ValintaperusteSearchController">

    <div id="searchSpec">



        <table class="spec">

            <!-- otsikkorivi -->
            <tr>
                <th tt="tarjonta.valintaperustekuvaus.haenimella">Hae nimellä</th>
                <th tt="tarjonta.valintaperustekuvaus.vuosi">Vuosi</th>
                <th tt="tarjonta.valintaperustekuvaus.kausi">Kausi</th>
                <th tt="tarjonta.valintaperustekuvaus.oppilaitostyyppi">Oppilaitostyyppi</th>

                <th colspan="2">&nbsp;</th>
            </tr>

            <!-- kontrollit -->
            <tr>
                <td>
                    <div class="search">
                        <input type="text" ng-model="model.searchSpec.hakusana"/>
                    </div>
                </td>
                <td>
                    <select data-ng-model="model.searchSpec.vuosi" data-ng-options="year for year in model.years"></select>
                </td>
                <td>
                    <koodistocombo koodistouri="'kausi'" koodiuri="model.searchSpec.kausiUri" locale="'fi'"/>
                </td>
                <td>
                    <koodistocombo koodistouri="'oppilaitostyyppi'" filteruris="model.userOrgTypes" koodiuri="model.searchSpec.oppilaitosTyyppi" locale="'fi'"/>
                </td>

                <td class="controls">
                    <input class="btn" type="button" tt="tarjonta.valintaperustekuvaus.tyhjenna" value="Tyhjennä" ng-click="reset()"/>
                    <input class="btn btn-primary" type="button" tt="tarjonta.valintaperustekuvaus.hae" value="Hae" ng-click="search()"/>
                </td>

            </tr>



        </table>

    </div>

    <div id="searchResults">
        <tabset>
            <tab heading="{{t('kk.valintaperusteet.tab.valintaperusteet')}}">
                <input class="btn" type="button"  tt="tarjonta.valintaperustekuvaus.luouusi" value="Luo uusi" ng-click="createNew('valintaperustekuvaus')"/>

                <table>
                    <tr>
                        <th tt="tarjonta.valintaperustekuvaus.list.nimi">Nimi</th>
                        <th tt="tarjonta.valintaperustekuvaus.list.oppilaitostyyppi">Oppilaitostyyppi</th>
                        <th tt="tarjonta.valintaperustekuvaus.list.vuosikausi">Vuosi ja kausi</th>
                    </tr>
                    <tr data-ng-repeat="valintaperuste in model.valintaperusteet">
                            <td ><a href="" data-ng-click="selectKuvaus(valintaperuste)">{{valintaperuste.kuvauksenNimi}}</a> </td>
                            <td data-ng-bind-html="valintaperuste.organisaatioTyyppi"></td>
                            <td data-ng-bind-html="valintaperuste.vuosikausi"></td>
                            <td><a href="" data-ng-click="removeKuvaus(valintaperuste)"><span tt="tarjonta.valintaperustekuvaus.poista.link">Poista</span></a> </td>
                            <td><a href="" data-ng-click="copyKuvaus(valintaperuste)"><span tt="tarjonta.valintaperustekuvaus.kopioi.link">Kopioi</span></a> </td>
                    </tr>
                </table>

            </tab>
            <tab heading="{{t('kk.valintaperusteet.tab.sora')}}">
                <input class="btn" type="button" tt="tarjonta.valintaperustekuvaus.luouusi" value="Luo uusi" ng-click="createNew('SORA')"/>
                <table>
                    <tr>
                        <th tt="tarjonta.valintaperustekuvaus.list.nimi">Nimi</th>
                        <th tt="tarjonta.valintaperustekuvaus.list.oppilaitostyyppi">Oppilaitostyyppi</th>
                        <th tt="tarjonta.valintaperustekuvaus.list.vuosikausi">Vuosi ja kausi</th>
                    </tr>
                    <tr data-ng-repeat="sora in model.sorat" >
                            <td ><a href="" data-ng-click="selectKuvaus(sora)">{{sora.kuvauksenNimi}}</a> </td>

                            <td data-ng-bind-html="sora.organisaatioTyyppi"></td>
                            <td data-ng-bind-html="sora.vuosikausi"></td>
                            <td><a href="" data-ng-click="removeKuvaus(sora)"><span tt="tarjonta.valintaperustekuvaus.poista.link">Poista</span></a> </td>
                            <td><a href="" data-ng-click="copyKuvaus(sora)"><span tt="tarjonta.valintaperustekuvaus.kopioi.link">Kopioi</span></a> </td>
                    </tr>
                </table>
            </tab>

        </tabset>
        <!--   TODO : This does not work replace current table with this "results-table"
        <results-table
                id="valintaperusteetResults"
                prefix="valintaperuste"
                content="model.valintaperusteet"
                columns="valintaperusteColumns"
                options="valintaPerusteOptions"
                selection="model"/>     -->



    </div>


</div>
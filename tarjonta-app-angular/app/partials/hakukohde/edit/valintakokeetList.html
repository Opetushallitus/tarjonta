<div>
    <tabset>
        <tab ng-repeat="kieli in kokeetModel.valintakoeLangs" heading="{{kieli.koodiNimi}}" active="kokeetModel.selectedTab[kieli.koodiUri]">

            <div ng-repeat="valintakoe in getValintakokeetByKieli(kieli.koodiUri)">
  
            <table class="tarjontaForm">
                <tr class="required">
                    <th tt="tarjonta.hakukohde.valintakoe.modal.valintakoenimi"></th>
                    <td><input type="text" ng-model="valintakoe.valintakoeNimi" ng-change="status.dirtify()"/></td>
                    <td>
                        <p class="error" ng-show="model.showError && !valintakoe.valintakoeNimi" tt="tarjonta.hakukohde.valintakoe.errors.tyyppi">Valintakokeen tyyppi on pakollinen.</p>
                    </td>
                </tr>
                            
                <tr class="required">
                    <th tt="tarjonta.hakukohde.valintakoe.modal.kuvaus"></th>
                    <td colspan="2">
                        <rich-textarea max="5000" mode="false" model="valintakoe.valintakokeenKuvaus.teksti" on-change="status.dirtify()"></rich-textarea>
                    </td>
                </tr>

                <tr>
                    <th tt="tarjonta.hakukohde.valintakoe.ajankohdat.title">Valintakoetilaisuudet</th>
                    <td colspan="2">
                    
                        <table class="valintakoeTilaisuudet">
                            <tbody ng-repeat="ajankohta in valintakoe.valintakoeAjankohtas">
	                            <tr>
	                                <td colspan="4" class="vkOsoite">
	                                   <osoite-field model="ajankohta.osoite" on-change="status.dirtify()"></osoite-field>
	                                </td>
	                                <td rowspan="2" class="vkPoista">
	                                   <button ng-click="deleteAjankohta(valintakoe, ajankohta)" class="btn"><span class="icon-remove"></span><br/><span tt="tarjonta.toiminnot.poista"></span></button>
	                                </td>
	                            </tr>
	                            <tr>
                                    <td class="vkAjankohta">
                                       <t-date-time timestamp="true" type="long" ng-model="ajankohta.alkaa" max="ajankohta.loppuu" ng-change="status.dirtify()"></t-date-time>
                                    </td>
                                    <td class="vkSeparator">-</td>
                                    <td class="vkAjankohta">
                                       <t-date-time timestamp="true" type="long" ng-model="ajankohta.loppuu" min="ajankohta.alkaa" ng-change="status.dirtify()"></t-date-time>
                                    </td>
	                                <td class="vkLisatieto">
	                                   <input type="text" ng-model="ajankohta.lisatiedot" placeholder="{{t('tarjonta.hakukohde.valintakoe.modal.ajankohta.lisatieto')}}"  ng-change="status.dirtify()"/>
	                                </td>
	                            </tr>
	                            <tr>
	                               <td colspan="5" class="vkErrors" ng-show="model.showError && !isValidAjankohta(ajankohta)">
	                                   <p class="error" tt="tarjonta.hakukohde.valintakoe.errors.ajankohta">Valintakokeen osoite ja ajankohta ovat pakollisia.</p>
	                               </td>
	                            </tr>
                            </tbody>
                        </table>
                        <a href ng-click="addAjankohta(valintakoe)" tt="tarjonta.hakukohde.valintakoe.ajankohdat.lis채채">Lis채채 uusi tilaisuus</a>
                    
                    
                    </td>
                </tr>

		    </table>

            <p>
                <button class="btn"
                    ng-click="deleteValintakoe(valintakoe)"><span tt="tarjonta.toiminnot.poista"></span> <span class="icon-remove"></span></button>
            </p>

            <hr/>
            
            </div>

            <p>
                <button class="btn btn-primary" ng-click="addValintakoe(kieli.koodiUri)"><span tt="tarjonta.hakukohde.valintakoe.listaus.uusi.valintakoe"></span> <span class="icon-plus-sign"></span></button>
            </p>

        
        </tab>
        <tab class="addLangTab">
            <tab-heading><span class="icon-plus"></span></tab-heading>
            <multi-select
                on-change="onLangSelection(uris)"
                order-with="userLangs"
                model="kokeetModel.langs"
                selection="kokeetModel.selectedLangs"
                display="dualpane"></multi-select>
        </tab>
    </tabset>

</div>